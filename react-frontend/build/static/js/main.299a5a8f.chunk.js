(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(8),r=n.n(i),c=(n(14),n(1)),o=n.n(c),l=n(5),u=n(2),p=n(3),m=n.n(p);function g(e){var t=e.data,n=(e.setMessage,t.message),a=t.intent;return"unknown"===t.intent&&(n="I don't quite understand"),"launch"===t.intent&&window.open(t.url),{message:n,intent:a}}n(21),n(22);function f(e){var t,n=e.message,a=e.transcript,i=e.startSession,r=e.closeSession,c=e.state,o=e.intentResponse,l=e.updateState,u=s.a.createElement("img",{className:"pi-ambient",onClick:function(){return i()},src:"pi-ambient.gif",alt:""}),p=h({closeSession:r,greeting:"listening...",state:c,transcript:a}),m=h({closeSession:r,greeting:"thinking...",state:c}),g=function(e){var t=e.intentResponse,n=e.message,a=e.updateState;return s.a.createElement("div",{className:"pi-active-container",onClick:function(){return a("ambient")}},s.a.createElement("h1",{className:"pi-greeting"},s.a.createElement("em",null,t)),s.a.createElement("div",{className:"pi-transcript-wrapper"},s.a.createElement("p",{className:"pi-transcript"},s.a.createElement("em",null,n))))}({intentResponse:o,message:n,updateState:l});return console.log(c),"ambient"===c?t=u:"listening"===c?t=p:"processing"===c?t=m:(console.log(n),t=g),s.a.createElement("div",{className:"pi-wrapper"},t,s.a.createElement("link",{href:"https://fonts.googleapis.com/css2?family=Montserrat:wght@400&display=swap",rel:"stylesheet"}))}function h(e){var t=e.closeSession,n=e.greeting,a=e.state,i=e.transcript,r="listening"===a?s.a.createElement("img",{src:"./pi-listening.gif",className:"pi-listening",alt:""}):s.a.createElement("div",{class:"spinner"},s.a.createElement("div",{class:"bounce1"}),s.a.createElement("div",{class:"bounce2"}),s.a.createElement("div",{class:"bounce3"}));return s.a.createElement("div",{onClick:function(){return t()},className:"pi-active-container"},s.a.createElement("h1",{className:"pi-greeting"},s.a.createElement("em",null,n)),s.a.createElement("div",{className:"pi-transcript-wrapper"},s.a.createElement("p",{className:"pi-transcript"},s.a.createElement("em",null,i))),r)}var d=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transcript,a=t.setMessage,s=t.setIntent,!1,"https://api.sahilkapur.com/setIntent",i="?transcript="+n.toLowerCase(),fetch("https://api.sahilkapur.com/setIntent"+i).then((function(e){return e.json()})).then((function(e){var t=g({data:e,setMessage:a}),n=t.intent,i=t.message;if(s(n),a(i),"speechSynthesis"in window){var r=new SpeechSynthesisUtterance(i);r.pitch=.2,r.rate=.9,window.speechSynthesis.speak(r)}else alert("TTS Not Available")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var v=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(p.useSpeechRecognition)(),c=r.listening,g=r.transcript,h=r.resetTranscript,v=Object(a.useState)("ambient"),w=Object(u.a)(v,2),b=w[0],E=w[1],S=Object(a.useState)("Hello, Sahil."),k=Object(u.a)(S,2),N=k[0],j=k[1],O=Object(a.useState)(null),y=Object(u.a)(O,2),I=y[0],C=y[1],L=function(){j("Go ahead..."),i(new Date),E("listening"),m.a.startListening({continuous:!0})},M=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("processing..."),E("processing"),e.next=4,d({transcript:g,setMessage:j,setIntent:C});case 4:h(),E("response"),setTimeout((function(){"response"===b&&E("ambient")}),1e4);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){j("Hello, Sahil."),E("ambient")};Object(a.useEffect)((function(){return i(new Date)}),[g]),"ambient"!==b||c||m.a.startListening({continuous:!0}),"listening"!==b&&g.toLowerCase().includes("ultron")&&(h(),L()),"response"===b&&g.toLowerCase().includes("clear")&&(h(),R()),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){""!==g&&"listening"===b&&((new Date-n)/1e3>2&&M())}),""!==g&&"listening"===b?1e3:null);var x={message:N,intentResponse:I,transcript:g,startSession:L,closeSession:R,state:b,updateState:E},T=window.location.search;return"pi"===new URLSearchParams(T).get("device")?f(x):function(e){var t=e.message,n=e.listening,a=e.stopListening,i=e.startSession,r=e.transcript;return s.a.createElement("div",{className:"app-container"},s.a.createElement("h2",{className:"greeting"},t),s.a.createElement("div",{className:"voice-icon-wrapper",onClick:function(){n?a():i({continuous:!0})}},s.a.createElement("img",{className:"voice-icon",src:"https://cdn.dribbble.com/users/32512/screenshots/5668419/calm_ai_design_by_gleb.gif",alt:""})),s.a.createElement("p",{className:"transcript"},s.a.createElement("em",null,r)),s.a.createElement("link",{href:"https://fonts.googleapis.com/css2?family=Montserrat:wght@200&display=swap",rel:"stylesheet"}))}(x)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(23)}},[[9,1,2]]]);
//# sourceMappingURL=main.299a5a8f.chunk.js.map